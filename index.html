<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SDGs ä¸å¡‘æ°¸çºŒ-æ·¨ç˜</title>
  <style>
    :root{
      --header-height:64px;
      --beach-sand:#f2dba4;
      --sea:#87ceeb;
      --text:#0b1320;
    }
    html,body{height:100%;margin:0;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans CJK TC', 'Microsoft JhengHei', sans-serif;color:var(--text);}
    .page{
      min-height:100%;display:flex;flex-direction:column;
      background: linear-gradient(to top, var(--beach-sand) 30%, var(--sea) 0%);
      background-repeat:no-repeat; background-attachment:fixed;
    }
    header{
      height:var(--header-height);display:flex;align-items:center;justify-content:space-between;padding:8px 18px;
      backdrop-filter: blur(2px);
    }
    .title{font-size:20px;font-weight:800;}
    .score-panel{font-size:16px;text-align:right}
    .game-area{flex:1;position:relative;overflow:hidden}
    /* æµ·æ°´å’Œæ²™ç˜çš„è¦–è¦ºï¼ˆå‰æ™¯é€æ˜ï¼‰ */
    .horizon{position:absolute;left:0;right:0;top:0;height:60%;pointer-events:none}
    .sand{position:absolute;left:0;right:0;bottom:0;height:40%;background:linear-gradient(180deg,#f5e6b8, #e6c58a);}
    .sea{position:absolute;left:0;right:0;top:0;height:60%;background:linear-gradient(180deg,#bfe9ff,#66c2ff);}

    /* åƒåœ¾å®¹å™¨ï¼šæ”¾åœ¨é é¢ä¸‹åŠéƒ¨ï¼ˆæ²™ç˜å€ï¼‰ */
    .beach{
      position:absolute;left:0;right:0;bottom:0;height:55%;pointer-events:auto;}

    .trash{
      position:absolute;transform-origin:center center;cursor:pointer;user-select:none;display:flex;align-items:center;justify-content:center;
      transition:transform 300ms ease, opacity 300ms ease;box-shadow:0 4px 8px rgba(0,0,0,0.12);
    }
    .trash .icon{font-size:20px;filter:drop-shadow(0 2px 0 rgba(0,0,0,0.06));}

    /* ä¾é«”ç©å¤§å°ä¸åŒçš„å°ºå¯¸ */
    .size-small{width:34px;height:34px;font-size:18px;border-radius:6px}
    .size-medium{width:54px;height:54px;font-size:26px;border-radius:8px}
    .size-large{width:80px;height:80px;font-size:34px;border-radius:10px}

    /* é»æ“Šæ•ˆæœ */
    .collected{transform:scale(0.1) rotate(720deg);opacity:0}

    /* ä»»å‹™å®Œæˆé®ç½© */
    .overlay{position:fixed;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,0.55);display:flex;align-items:center;justify-content:center;z-index:40;}
    .modal{background:white;padding:28px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.3);text-align:center;width:320px}
    .modal h2{margin:0 0 8px;font-size:20px}
    .btn{display:inline-block;padding:10px 16px;border-radius:8px;background:#0b84ff;color:#fff;text-decoration:none;margin:8px 6px;cursor:pointer}

    /* å°èªªæ˜ */
    .hud{position:fixed;left:18px;bottom:18px;background:rgba(255,255,255,0.88);padding:10px 12px;border-radius:10px;font-size:13px;box-shadow:0 6px 18px rgba(0,0,0,0.08)}

    @media (max-width:480px){.title{font-size:16px}.score-panel{font-size:14px}}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title">SDGs ä¸å¡‘æ°¸çºŒ-æ·¨ç˜</div>
      <div class="score-panel">å¾—åˆ†: <span id="score">0</span>  å·²æ’¿: <span id="collected">0</span>/<span id="total">50</span></div>
    </header>

    <main class="game-area" id="game">
      <div class="horizon">
        <div class="sea"></div>
        <div class="sand"></div>
      </div>

      <div class="beach" id="beach"></div>

    </main>

    <div class="hud">é»æ“Šæ²™ç˜ä¸Šçš„åƒåœ¾ä¾†æ’¿èµ·å®ƒå€‘ï¼æ¯ç¨®åƒåœ¾ä¾é«”ç©æœ‰ä¸åŒåˆ†æ•¸ã€‚</div>
  </div>

  <template id="trash-template">
    <div class="trash">
      <div class="icon"></div>
    </div>
  </template>

  <script>
    // éŠæˆ²è¨­å®š
    const TOTAL = 50;
    const beach = document.getElementById('beach');
    const scoreEl = document.getElementById('score');
    const collectedEl = document.getElementById('collected');
    const totalEl = document.getElementById('total');
    totalEl.textContent = TOTAL;

    // åƒåœ¾ç¨®é¡ï¼ˆä½¿ç”¨ emoji ä½œç‚ºç°¡æ˜“åœ–ç¤ºï¼‰
    const TYPES = [
      {name:'ä¿ç‰¹ç“¶', icon:'ğŸ§´'},
      {name:'ç´™é¡', icon:'ğŸ—ï¸'},
      {name:'é¤ç›’', icon:'ğŸ±'},
      {name:'å¡‘è† è¢‹', icon:'ğŸ›ï¸'},
      {name:'é£²æ–™æ¯', icon:'ğŸ¥¤'},
      {name:'æ¼‚æµåƒåœ¾', icon:'ğŸªµ'}
    ];

    // åˆ†æ•¸å°æ‡‰
    const SCORES = { 'small':10, 'medium':20, 'large':30 };

    let score = 0;
    let collected = 0;

    function rand(min,max){ return Math.random()*(max-min)+min }

    function placeTrash(){
      const rect = beach.getBoundingClientRect();
      // ä½¿ç”¨ç™¾åˆ†æ¯”å®šä½ï¼Œè®“é‡æ–°è¼‰å…¥æ™‚ç›¸å°ä½ç½®ä¸€è‡´
      for(let i=0;i<TOTAL;i++){
        const t = TYPES[Math.floor(Math.random()*TYPES.length)];
        const tpl = document.getElementById('trash-template');
        const node = tpl.content.firstElementChild.cloneNode(true);
        const icon = node.querySelector('.icon');
        icon.textContent = t.icon || ' ';
        node.dataset.type = t.name;

        // æ±ºå®šå¤§å° (small/medium/large)
        const r = Math.random();
        const size = r<0.45 ? 'small' : (r<0.85 ? 'medium' : 'large');
        node.classList.add('size-'+size);
        node.dataset.size = size;
        node.dataset.score = SCORES[size];

        // éš¨æ©Ÿä½ç½®ï¼šåªåœ¨é é¢çš„ä¸‹åŠéƒ¨ï¼ˆæ²™ç˜å€ï¼‰
        const left = rand(2, 92); // ç™¾åˆ†æ¯”
        const top = rand(55, 90); // æ”¾åœ¨ä¸‹åŠéƒ¨ (55% è‡³ 90%)
        node.style.left = left + '%';
        node.style.top = top + '%';

        // éš¨æ©Ÿæ—‹è½‰
        const rot = Math.floor(rand(0,360));
        node.style.transform = `rotate(${rot}deg)`;

        // å°‘è¨±éš¨æ©Ÿåç§»ï¼Œé¿å…å®Œå…¨é‡ç–Š
        node.style.zIndex = 10 + Math.floor(rand(0,50));

        // é»æ“Šè¡Œç‚º
        node.addEventListener('click', function(e){
          collectTrash(node);
        },{once:true});

        beach.appendChild(node);
      }
    }

    function collectTrash(node){
      const s = Number(node.dataset.score) || 0;
      score += s;
      collected += 1;
      scoreEl.textContent = score;
      collectedEl.textContent = collected;

      // æ’¿èµ·å‹•ç•«
      node.classList.add('collected');
      setTimeout(()=>{ if(node && node.remove) node.remove() }, 400);

      if(collected >= TOTAL) showSuccess();
    }

    function showSuccess(){
      const overlay = document.createElement('div'); overlay.className='overlay';
      const modal = document.createElement('div'); modal.className='modal';
      modal.innerHTML = `\n        <h2>ä»»å‹™æˆåŠŸ ğŸ‰</h2>\n        <p>ä½ å·²æ’¿å®Œæ‰€æœ‰åƒåœ¾ï¼ç¸½å¾—åˆ†ï¼š<strong>${score}</strong></p>\n        <div style=\"margin-top:12px\">\n          <button class=\"btn\" id=\"next\">å‰å¾€ä¸‹ä¸€é—œ</button>\n          <button class=\"btn\" id=\"restart\">é‡æ–°æŒ‘æˆ°</button>\n        </div>`;
      overlay.appendChild(modal);
      document.body.appendChild(overlay);

      document.getElementById('restart').addEventListener('click',()=>{
        overlay.remove(); resetGame();
      });
      document.getElementById('next').addEventListener('click',()=>{
        overlay.remove(); alert('ä¸‹ä¸€é—œç¯„ä¾‹ï¼šå¯åœ¨ç¨‹å¼ä¸­æ–°å¢æ›´é«˜é›£åº¦ï¼ˆä¾‹å¦‚æ›´å¤šåƒåœ¾ã€å®šæ™‚æ²™ç˜æ½®æ±ã€é™åˆ¶æ™‚é–“ç­‰ï¼‰');
      });
    }

    function resetGame(){
      // æ¸…é™¤ä¸¦é‡æ–°ç”Ÿæˆ
      score = 0; collected = 0;
      scoreEl.textContent = score; collectedEl.textContent = collected;
      beach.innerHTML = '';
      placeTrash();
    }

    // åˆå§‹åŒ–
    window.addEventListener('load', ()=>{
      placeTrash();
    });

    // å…è¨±æŒ‰ R é‡ç½®ï¼ˆæ¸¬è©¦ç”¨ï¼‰
    window.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='r'){ resetGame() } });
  </script>
</body>
</html>
